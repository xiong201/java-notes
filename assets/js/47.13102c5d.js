(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{378:function(n,t,s){"use strict";s.r(t);var v=s(7),i=Object(v.a)({},(function(){var n=this,t=n._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("h1",{attrs:{id:"nginx-简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx-简介"}},[n._v("#")]),n._v(" Nginx 简介")]),n._v(" "),t("p",[t("strong",[n._v("Nginx (engine x)")]),n._v(" 是一款轻量级的 Web 服务器 、反向代理服务器及电子邮件（IMAP/POP3）代理服务器。特点是占用内存少，并发能力强。")]),n._v(" "),t("h2",{attrs:{id:"相关概念"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#相关概念"}},[n._v("#")]),n._v(" 相关概念")]),n._v(" "),t("ul",[t("li",[t("p",[t("strong",[n._v("正向代理")]),n._v("：通过客户端（浏览器）配置代理服务器，通过代理服务器进行互联网访问。")])]),n._v(" "),t("li",[t("p",[t("strong",[n._v("反向代理")]),n._v("：客户端只需将请求发送到反向代理服务器，由反向代理服务器去选择目标服务器获取数据后，再返回给客户端，此时反向代理服务器和目标服务器对外就是一个服务器，暴露的是代理服务器地址，隐藏了真实服务器P地址。")])]),n._v(" "),t("li",[t("p",[t("strong",[n._v("负载均衡")]),n._v("： 单个服务器解决不了，增加服务器数量，将原先集中请求到单个服务器改为将请求分发到各个服务器，将负载分发到各个服务器，这就是负载均衡。")])]),n._v(" "),t("li",[t("p",[t("strong",[n._v("动静分离")]),n._v("：为了加快解析速度，可以将动态页面和静态页面由不同的服务器来解析，加快解析速度。降低原来单个服务器的压力。")])])]),n._v(" "),t("h1",{attrs:{id:"nginx-常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx-常用命令"}},[n._v("#")]),n._v(" Nginx 常用命令")]),n._v(" "),t("p",[n._v("nginx -s stop    快速关闭Nginx，可能不保存相关信息，并迅速终止web服务。\nnginx -s quit    平稳关闭Nginx，保存相关信息，有安排的结束web服务。\nnginx -s reload   因改变了Nginx相关配置，需要重新加载配置而重载。\nnginx -s reopen   重新打开日志文件。\nnginx -c filename  为 Nginx 指定一个配置文件，来代替缺省的。\nnginx -t       不运行，仅仅测试配置文件。nginx 将检查配置文件的语法的正确性，并尝试打开配置文件中所引用到的文件。\nnginx -v       显示 nginx 的版本。\nnginx -V       显示 nginx 的版本，编译器版本和配置参数。")]),n._v(" "),t("h1",{attrs:{id:"nginx-配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx-配置文件"}},[n._v("#")]),n._v(" Nginx 配置文件")]),n._v(" "),t("p",[n._v("默认位置："),t("code",[n._v("vim /usr/local/nginx/conf/nginx.conf")])]),n._v(" "),t("p",[n._v("配置文件组件包含三部分：")]),n._v(" "),t("ol",[t("li",[t("p",[n._v("全局块")])]),n._v(" "),t("li",[t("p",[n._v("event块")])]),n._v(" "),t("li",[t("p",[n._v("http块")])])]),n._v(" "),t("h3",{attrs:{id:"全局块"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#全局块"}},[n._v("#")]),n._v(" 全局块")]),n._v(" "),t("p",[n._v("全局块：配置服务器整体运行的配置指令。")]),n._v(" "),t("p",[n._v("从配置文件开始到 events 块之间的内容，主要会设置一些影响 nginx 服务器整体运行的配置指令，主要包括配 置运行 Nginx 服务器的用户（组）、允许生成的 worker process 数，进程 PID 存放路径、日志存放路径和类型以 及配置文件的引入等。")]),n._v(" "),t("p",[n._v("比如上面第一行配置的：这是 Nginx 服务器并发处理服务的关键配置，worker_processes 值越大，可以支持的并发处理量也越多，但是 会受到硬件、软件等设备的制约")]),n._v(" "),t("p",[t("img",{attrs:{src:"https://notes-img2022.oss-cn-shenzhen.aliyuncs.com/img/1664159935618-eb5102b3-0cfc-41b6-a2f3-5e08bc2eb30f.png",alt:"img"}})]),n._v(" "),t("h3",{attrs:{id:"event块"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#event块"}},[n._v("#")]),n._v(" event块")]),n._v(" "),t("p",[n._v("event块：影响 Nginx 服务器与用户的网络连接。")]),n._v(" "),t("p",[n._v("events 块涉及的指令主要影响 Nginx 服务器与用户的网络连接，常用的设置包括是否开启对多 work process 下的网络连接进行序列化，是否允许同时接收多个网络连接，选取哪种事件驱动模型来处理连接请求，每个 wordprocess 可以同时支持的最大连接数等。")]),n._v(" "),t("p",[n._v("上述例子就表示每个 work process 支持的最大连接数为 1024.")]),n._v(" "),t("p",[n._v("这部分的配置对 Nginx 的性能影响较大，在实际中应该灵活配置。")]),n._v(" "),t("p",[t("img",{attrs:{src:"https://notes-img2022.oss-cn-shenzhen.aliyuncs.com/img/1664159880975-8795d5af-a265-460e-8fc1-1022e65ca6a7.png",alt:"img"}})]),n._v(" "),t("h3",{attrs:{id:"http块"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#http块"}},[n._v("#")]),n._v(" http块")]),n._v(" "),t("p",[n._v("这算是 Nginx 服务器配置中最频繁的部分，代理、缓存和日志定义等绝大多数功能和第三方模块的配置都在这里。")]),n._v(" "),t("p",[n._v("需要注意的是：http 块也可以包括 http 全局块、server 块。")]),n._v(" "),t("p",[t("img",{attrs:{src:"https://notes-img2022.oss-cn-shenzhen.aliyuncs.com/img/1664160074412-3a99a4dc-f2f7-4290-86e9-d6ce87aab3c9.png",alt:"img"}})]),n._v(" "),t("h1",{attrs:{id:"nginx应用场景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx应用场景"}},[n._v("#")]),n._v(" Nginx应用场景")]),n._v(" "),t("ul",[t("li",[t("p",[n._v("Http反向代理")])]),n._v(" "),t("li",[t("p",[n._v("Https反向代理")])]),n._v(" "),t("li",[t("p",[n._v("负载均衡")])]),n._v(" "),t("li",[t("p",[n._v("网站多个webapp配置")])]),n._v(" "),t("li",[t("p",[n._v("静态站点")])]),n._v(" "),t("li",[t("p",[n._v("搭建文件服务器")])]),n._v(" "),t("li",[t("p",[n._v("解决跨域")])])])])}),[],!1,null,null,null);t.default=i.exports}}]);