---
title: Nginx 面试题
date: 2023-10-24 15:51:01
permalink: /pages/d4abbd/
---
# 什么是Nginx
Nginx 同 Apache 一样都是 WEB 服务器，不过，Nginx 更加轻量级，它的内存占用少，启动极快，高并发能力强，在互联网项目中广泛应用。并且，Nginx 可以作为反向代理服务器使用，支持 IMAP/POP3/SMTP 服务。
# Nginx 的特点有哪些

1. **内存占用非常少** ：一般情况下，10000 个非活跃的 HTTP Keep-Alive 连接在 Nginx 中仅消耗 2.5MB 的内存，这是 Nginx 支持高并发连接的基础。
2. **高并发** : 单机支持 10 万以上的并发连接
3. **跨平台** :可以运行在 Linux，Windows，FreeBSD，Solaris，AIX，Mac OS 等操作系统上。
4. **扩展性好** ：第三方插件非常多！
5. **安装使用简单** ：对于简单的应用场景，我们很快就能够上手使用。
6. **稳定性好** ：bug 少，不会遇到各种奇葩的问题。
7. **免费** ：开源软件，免费使用。
# Nginx能用来做啥

- 静态资源服务器
- 反向代理
- 正向代理
- 负载均衡
# Nginx 有哪些负载均衡策略
Nginx常见的负载均衡策略有：

- **轮询（Round Robin，默认）**：如果没有配置权重的话，每个请求按时间顺序逐一分配到不同的服务器处理。如果配置权重的话，权重越高的服务器被访问的概率就越大。
- **IP 哈希**：根据发出请求的和客户端 ip 的 hash 值来分配服务器，可以保证同 IP 发出的请求映射到同一服务器，或者具有相同 hash 值的不同 IP 映射到同一服务器。该算法在一定程度上解决了集群部署环境下 Session 不共享的问题。
- **最小连接数**：当有新的请求出现时，遍历服务器节点列表并选取其中活动连接数最小的一台服务器来响应当前请求。活动连接数可以理解为当前正在处理的请求数。
# Nginx 常用命令有哪些

- 启动 nginx 。
- 停止 nginx -s stop 或 nginx -s quit 。
- 重载配置 ./sbin/nginx -s reload(平滑重启) 或 service nginx reload 。
- 重载指定配置文件 .nginx -c /usr/local/nginx/conf/nginx.conf 。
- 查看 nginx 版本 nginx -v 。
- 检查配置文件是否正确 nginx -t 。
- 显示帮助信息 nginx -h 。
# Nginx性能优化的常见方式

- **设置 Nginx 运行工作进程个数** ：一般设置 CPU 的核心数或者核心数 x2；
- **开启 Gzip 压缩** ：这样可以使网站的图片、CSS、JS 等文件在传输时进行压缩，提高访问速度, 优化 Nginx 性能。详细介绍可以参考[Nginx 性能优化功能- Gzip 压缩(大幅度提高页面加载速度)](https://www.cnblogs.com/kevingrace/p/10018914.html)这篇文章；
- **设置单个 worker 进程允许客户端最大连接数** ：一般设置为 65535 就足够了；
- **连接超时时间设置** ：避免在建立无用连接上消耗太多资源；
- **设置缓存** ：像图片、CSS、JS 等这类一般不会经常修改的文件，我们完全可以设置图片在浏览器本地缓存，提高访问速度，优化 Nginx 性能。

