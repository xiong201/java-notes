# 系统管理



## 关机&&重启



-  shutdown 

-  

- - shutdown -h now： 表示立即关机

-  

- - shutdown -h 1： 表示1分钟后关机

-  

- - shutdown -r now：立即重启

-  halt：立即关机 

-  reboot：重启系统 



## init 命令



init 命令切换系统运行级别。



运行级别说明：



1. 关机

1. 单用户【找回丢失密码】

1. 多用户状态没有网络服务

1. 多用户状态有网络服务

1. 系统未使用保留给用户

1. 图形界面

1. 系统重启



![img](https://notes-img2022.oss-cn-shenzhen.aliyuncs.com/img/image-20221025121642187.png)



常用运行级别是3和5，要修改默认的运行级别可修改文件`/etc/inittab` 的内容



```plain
id:5:initdefault:
```



也可以使用`init [012356]`指令切换到指定的运行级别。



使用案例：



-  使用init切换不同运行级别，然后关机 

-  找回root密码 



## echo



-  基本语法 

-  

- - echo [选项] [输出内容]

-  应用实例 

-  

- - 案例：使用echo指令输出环境变量,输出当前的环境路径。

-  

- -  

- - - echo $PATH

-  

- - 案例：使用echo指令输出hello,world!

-  

- -  

- - - echo ”hello,world!“



## 查看历史命令——history



查看已轻执行过历史命令,也可以执行历史指令



-  基本语法 

-  

- - history（功能描述，查看已经执行过历史命令）

-  应用实例 

-  

- - 案例1：显示所有的历史命令

-  

- -  

- - - history

-  

- - 案例2：显示最近使用过的10个指令。

-  

- -  

- - - history 10

-  

- - 案例3：执行历史编号为5的指令

-  

- -  

- - - !5



## 查看进程——ps



ps -ef 去进行查看系统上的运行的所有进程。



只执行ps命令，默认是显示当前控制台下属于当前用户的进程；



-  -e 显示运行在系统上的所有进程 

-  -f 扩展显示输出 



## service 命令——控制系统服务



service命令可以启动、停止、重新启动和关闭系统服务，还可以显示所有系统服务的当前状态。



- 显示所有服务的状态：service --status-all

- 重启网络服务：service network restart



## systemctl 命令 – 管理系统服务



systemctl 是用于管理系统服务。从功能上涵盖了之前service、chkconfig、init、setup等多条命令的大部分功能。



**语法格式**：systemctl 参数 服务



**常用参数：**

| start                      | 启动服务           |
| -------------------------- | ------------------ |
| stop                       | 停止服务           |
| restart                    | 重启服务           |
| enable                     | 使某服务开机自启   |
| disable                    | 关闭某服务开机自启 |
| status                     | 查看服务状态       |
| list -units --type=service | 列举所有已启动服务 |



## 端口处理



firewall-cmd --list-ports  #查看所有已开放的临时端口（默认为空）
firewall-cmd --add-port=3306/tcp --permanent  添加永久开放的端口（例如：3306端口）



配置结束后需要输入重载命令并重启防火墙以生效配置：



```plain
firewall-cmd --reload  

systemctl restart firewalld
```



# 磁盘管理



## sync



- sync：将内存的数据同步到磁盘



# 用户管理



Linux 系统是一个多用户多任务的分时操作系统，任何一个要使用系统资源的用户，都必须首先向系统管理员申请一个账号，然后以这个账号的身份进入系统。



Linux用户至少属于一个用户组。



login：用户登入系统



logout：用户退出系统



su：切换用户



### 添加用户



```plain
useradd [选项] 用户名
```



当创建用户成功后，会自动创建和用户同名的家目录。也可以通过：`useradd -d 指定目录 新的用户名`给新创建的用户指定家目录。



### 指定/修改密码



```plain
passwd 用户名
```



### 删除用户



```plain
userdel 用户名
```



-  删除用户，保留家目录 

-  

- - 



```plain
userdel 用户名
```



-  删除用户，同时删除家目录 

-  

- - 



```plain
userdel -r 用户名
```



### 查询用户信息



```plain
id 用户名
```



### 切换用户



```plain
su - 用户名
```



1.  权限高的用户切换到权限低的用户，不需要输入密码，反之需要。 

1.  当需要返回到原来的用户时，使用exit命令。 



### 查看当前用户/登录用户



```plain
whoami/who am l
```



### 用户组



每个用户都有一个用户组，系统可以对一个用户组中的所有用户进行集中管理。不同 Linux 系统对用户组的规定有所不同，如 Linux 下的用户属于与它同名的用户组，这个用户组在创建用户时同时创建。



-  增加组：`groupadd 组名` 

-  增加用户时加上组：`useradd -g 用户组 用户名` 

-  删除组：`groupdel 组名` 

-  修改用户组：`usermod -g 用户组 用户名` 



### 用户和组相关文件



-  /ect/passwd文件：用户配置文件，记录用户各种信息 

-  /ect/shadow文件：口命配置文件 

-  /ect/group文件：组的配置文件，记录Linux包含的组的信息。 



# 目录管理



## 目录切换命令



cd（change directory）



基本语法



- cd[参数] （功能描述。切换到指定目录）



常用参数：



-  绝对路径和相对路径 

-  cd ~或者cd ：回到自己的家目录 

-  `cd ..` ：回到当前目录的上一级目录 

-  `cd -`**：** 切换到上一个操作所在目录 



## pwd



pwd（print working directory）显示当前工作目录的绝对路径。



## 查看目录——ls



```plain
ls [选项] [目录或是文件]
```



常用选项：



-  -a：显示当前目录所有的文件和目录，包括隐藏的。 

-  -l：以列表的方式显示信息 



## 创建目录——mkdir



基本语法



```plain
mkdir [选项] 要创建的目录
```



常用选项



```plain
-p：创建多级目录
```



应用实例



```plain
案例1：创建一个目录/home/dog
    mkdir /home/dog
案例2：创建多级目录/home/animal/tiger
    mkdir -p /home/animal/tiger
```



## 删除空目录——rmdir



rmdir指令删除空目录



-  基本语法 

-  

- - rmdir [选项] 要册除的空目录

-  应用实例 

-  

- - 案例1：删除一个目录/home/dog使用细节

-  rmdir删除的是空目录，如果目录下有内容时无法删除的。 



## 查找目录——find



find指令将从指定目录向下递归地遍历其各个子目录，将满足条件的文件或者目录显示在终端。



-  基本语法 

-  

- - find [搜索范围] [选项]

-  选项说明 

-  

- - 

| 选项                                             | 功能                             |
| ------------------------------------------------ | -------------------------------- |
| -name <查询方式>                                 | 按照指定的文件名查找模式查找文件 |
| -user <用户名>                                   | 查找属于指定用户名所有文件       |
| -size <文件大小>（+n大于-n小于n等于（n为数目）） | 按照指定的文件大小查找文件       |



-  应用实例 

-  

- - 案例1：按文件名：根据名称查找/home目录下的hello.txt文件

-  

- -  

- - - find /home -name hello.txt

-  

- - 案例2：按拥有者：查找/opt目录下，用户名称为nobody的文件

-  

- -  

- - - find /opt -user nobody

-  

- - 案例3：查找整个linux系统下大于、等于、小于20m的文件

-  

- -  

- - - find / -size +20M

-  

- -  

- - - find / -size 20M

-  

- -  

- - - find / -size -20M

-  

- - 案例4：按文件名：根据名称查找/目录下的以txt结尾的文件

-  

- -  

- - - find / -name *.txt



# 文件管理



## 创建空文件——touch



touch指令创建空文件



-  基本语法 

-  

- - touch 文件名称s（可创建多个空文件）

-  应用实例 

-  

- - 案例1：创建一个空文件hello.txt

-  

- -  

- - - touch hello.txt



## 文件拷贝——cp



cp指令拷贝文件到指定目录。注意：cp 命令不仅可以拷贝文件还可以拷贝目录，压缩包等，拷贝文件和压缩包时不 用写-r 递归。



-  基本语法 

-  

- - cp [选项] (source) (dest)

-  常用选项 

-  

- - -r：递归复制整个文件夹

-  应用实例 

-  

- - 案例1：将/home/aaa.txt拷贝到/home/bbb目录下（当前工作目录为/home）

-  

- -  

- - - cp aaa.txt /home/bbb

-  

- - 案例2：递归复制整个文件夹，举例

-  

- -  

- - - cp -r src/ target/

-  

- -  

- - - 注意一定要注意 你当前的工作目录位置，然后准确地定位源目录和目标目录。



## 删除文件——rm



rm指令移除文件或目录



-  基本语法 

-  

- - rm [选项] (要删除的文件或目录)

-  常用选项 

-  

- - -r：递归删除整个文件夹

-  

- - -f：强制刚除不提示

-  应用实例 

-  

- - 案例1：将/home/aaa.txt删除（当前工作目录为/home）

-  

- -  

- - - rm aaa.txt

-  

- - 案例2：递归删除整个文件夹/home/bbb（当前工作目录为/home）

-  

- -  

- - - rm -rf bbb/



## 文件重命名或文件移动——mv



-  基本语法 

-  

- - mv (oldNameFile) (newNameFile)：(功能描述:重命名)

-  

- - mv (/temp/movefile) (/targetFolder)：(功能描述:移动文件)

-  应用实例 

-  

- - 案例1：将/home/aaa.txt文件重新命名为pig.txt（当前工作目录为/home）

-  

- -  

- - - mv aaa.txt pig.txt

-  

- - 案例2：将/home/pig.txt文件移动到root目录下（当前工作目录为/home）

-  

- -  

- - - mv pig.txt /root



## 文件查看——cat/more/less/head/tail



### cat



cat查看文件内容，是以只读的方式



-  基本语法 

-  

- - cat [选项] 要查看的文件

-  常用选项 

-  

- - -n：显示行号

-  应用实例 

-  

- - 案例1: /ect/profile文件内容，并显示行号

-  

- -  

- - - cat -n /ect/profile



### more



more指令是一个基于vi编辑器的文本过滤器，它以全屏幕的方式按页显示文本文件的内容。



more指令中内置了若干快捷键，详见操作说明：

| 操作   | 功能说明               |
| ------ | ---------------------- |
| 空白键 | 向下翻一页             |
| Enter  | 向下翻一行             |
| q      | 离开more               |
| Ctrl+F | 向下滚动一屏           |
| Ctrl+B | 返回上一屏             |
| =      | 输出当前行号           |
| :f     | 输出文件名和当前的行号 |



-  基本语法 

-  

- - more 要查看的文件操作说明

-  应用实例 

-  

- - 案例：采用more查看文件/etc/profile

-  

- -  

- - - more /etc/profile



### less



less指令用来分屏查看文件内容，它的功能与more指令类似，但是比more指令更加强大，支持各种显示终端。less指令在显示文件内容时，并不是一次将整个文件加载之后才显示，而是根据显示需要加载内容，**对于显示大型文件具有较高的效率**。



-  基本语法 

-  

- - less 要查看的文件

-  操作说明 

-  

- - 

| 操作       | 功能说明                                         |
| ---------- | ------------------------------------------------ |
| 空白键     | 向下翻动一页                                     |
| [PageDown] | 向下翻动一页                                     |
| [PageUp]   | 向上翻动一页                                     |
| /字串      | 向下搜寻“字串”的功能：n：向下查我；N：向上查找； |
| ?字串      | 向上搜寻“字串”的功能：n：向上查我；N：向下查找； |
| q          | 离开less这个程序                                 |



### head



head用于显示文件的开头部分内容，默认情况下head指令显示文件的前10行内容



-  基本语法 

-  

- - head 文件路径（功能描述：查看文件头10行内容）

-  

- - head -n 5 文件路径（功能描述：查看文件头5行内容，5可以是任意行数）

-  应用实例 

-  

- - 案例：查看/etc/profile的前面5行代码

-  

- -  

- - - head -n 5 /etc/profile



### tail



tail用于输出文件中尾部的内容，默认情况下tail指令显示文件的后10行内容。



-  基本语法 

-  

- - tail 文件路径（功能描述:查看文件后10行内容）

-  

- - tail -n 5 文件路径（功能描述:查看文件后5行内容，5可以是任意行数）

-  

- - tail -f 文件路径（功能描述：实时追踪该文档的所有更新）

-  应用实例 

-  

- - 案例1：查看/etc/profile最后5行的代码

-  

- -  

- - - tail -n 5 /etc/profile

-  

- - 案例2：实时监控mydate.txt，看看到文件有变化时，是否看到，实时的追加日期

-  

- -  

- - - tail -f mydate.txt

-  

- - 案例3：实时监控tomcat 的日志文件

-  

- -  

- - - tail -f catalina-2016-11-11.log



## 搜索命令——grep



grep过滤查找



-  基本语法 

-  

- - grep [选项] 查找内容 源文件

-  常用选项 

-  

- - 

| 选项 | 功能               |
| ---- | ------------------ |
| -n   | 显示匹配行及行号。 |
| -i   | 忽略字母大小写     |



-  应用实例 

-  

- - 案例1：请在hello.txt文件中，查找"yes”所在行，并且显示行号。--color 代表高亮显示

-  

- - grep -n yes hello.txt  --colorr



## 符号链接——in



软链接也叫符号链接，类似于windows里的快捷方式，主要存放了链接其他文件的路径。



-  基本语法 

-  

- - ln -s [原文件或目录] [软链接名] （功能描述：给原文件创建一个软链接）（如果软链接名时目录路径，cd 软链接名 就能跳到目录）

-  应用实例 

-  

- - 案例1：在/home目录下创建一个软连接linkToRoot，连接到/root目录

-  

- -  

- - - ln -s /root linkToRoot



## 压缩/解压缩文件



tar指令是打包指令，最后打包后的文件是.tar.gz的文件。



-  基本语法 

-  

- - tar [选项] XXX.tar.gz 打包的内容（功能描述，打包目录，压缩后的文件格式.tar.gz）。

-  选项说明 

-  

- - 

| 选项 | 功能                     |
| ---- | ------------------------ |
| -c   | 产生.tar打包文件         |
| -v   | 显示详细信息             |
| -f   | 指定压缩后的文件名       |
| -z   | 通过gzip支持压缩或解压缩 |
| -x   | 解包.tar文件             |



-  应用实例 

-  

- - 打包并压缩文件

-  

- -  

- - - 命令：`tar -zcvf 打包压缩后的文件名 要打包压缩的文件`

-  

- -  

- - - 假如 test 目录下有三个文件分别是：aaa.txt bbb.txt ccc.txt，如果我们要打包 test 目录并指定压缩后的压缩包名称为 test.tar.gz 可以使用命令：`**tar -zcvf test.tar.gz aaa.txt bbb.txt ccc.txt**` **或** `**tar -zcvf test.tar.gz /test/**`

-  

- - 解压压缩包

-  

- -  

- - - 命令：`tar [-xvf] 压缩文件`

-  

- -  

- - - 将 /test 下的 test.tar.gz 解压到当前目录下可以使用命令：`**tar -xvf test.tar.gz**`

-  

- -  

- - - 将 /test 下的 test.tar.gz 解压到根目录/usr 下:`**tar -xvf test.tar.gz -C /usr**`（- C 代表指定解压的位置）



## wget命令——下载网络文件



wget 是用于从指定网址下载网络文件。wget 命令非常稳定，一般即便网络波动也不会导致下载失败，而是不断的尝试重连，直至整个文件下载完毕。需使用 `yum -y install wget` 安装



**语法格式：** wget [参数]  网址



**常用参数：**

| -V                  | 显示版本信息       |
| ------------------- | ------------------ |
| -h                  | 显示帮助信息       |
| -b                  | 启动后转入后台执行 |
| -c                  | 支持断点续传       |
| -O                  | 定义本地文件名     |
| -e <命令>           | 执行指定的命令     |
| --limit-rate=<速率> | 限制下载速度       |



## make 命令——编译内核或源码文件



make 命令的功能是用于编译内核或源码文件。make是GNU工程化编译工具，用于编译众多相互关联的源代码文件，也可以编译内核或模块功能，以工程化的工作方式，提高开发效率。



初次运行 make 命令时，它会通过扫描Makefile文件找到目标及其依赖关系，并在建立依赖关系后依次编译所对应的源码程序。



**语法格式:** make [参数] 文件



# 文本编辑器 vi 和 vim



所有的Linux系统都会内建 vi 文本编辑器。vim 具有程序编辑的能力，是 vi 的增强版本。



基本上有 vi 有3种模式：



- 一般命令模式

- 编辑模式

- 命令行模式



![img](https://notes-img2022.oss-cn-shenzhen.aliyuncs.com/img/image-20221025110803735.png)



## 一般命令模式



一般命令模式，可以使用快捷键，其他模式不能使用快捷键。



以 vi 方式打开一个文件默认进入正常模式。在正常模式中，可以使用上下左右来移动光标，可以删除字符或者整行来处理文档内容，可以使用复制粘贴处理文件数据。



正常模式的快捷键：



-  dd 删除光标所在的行 

-  delete 删除单个字符 

-  yy 复制光标所在的行 

-  p 粘贴复制的内容在光标所在的行的下一行。 



## 编辑模式



在正常模式，按下 I、i、A、a、O、o、R、r等等一些字母就可以进入到编辑模式，一般都按下i进入编辑模式。**编辑完成之后按ESC键返回一般命令模式**。



## 命令行模式



一般命令模式输入 `:` 进入命令行模式。命令行模式可以使用命令来完成读取、保存、替换、退出、显示行号等动作。常用的命令有：



-  w : 表示保存 

-  wq：表示保存并退出 

-  q：表示直 接退出 

-  q! ： 表示强制退 出 

-  搜索/查找： `/关键词`。在搜索结果中切换上/下一个结果：`N`(上一个)、`n`（下一个），如果需要取消高亮，需要输入`:nohl` 



# yum命令——基于RPM的软件包管理器



yum 基于 RPM 包管理，能够从指定的服务器自动下载 RPM 包并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软件包，无须繁琐地一次次下载、安装。



常用命令：



- 仅安装指定的软件命令：yum install <package_name>

- 列出所有可安裝的软件清单命令：yum list

- 删除软件包命令：yum remove <package_name>

- 查找软件包命令：yum search 