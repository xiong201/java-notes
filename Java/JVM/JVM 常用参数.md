JVM参数主要分为以下三种： **标准参数**、**非标准参数**、**不稳定参数**。

# 标准参数、非标准参数、不稳定参



## 标准参数

标准参数，顾名思义，标准参数中包括功能以及输出的结果都是很稳定的，基本上 不会随着JVM版本的**变化而变化** 。标准参数以 **-** 开头，如：java -version、java -jar等，通过java -help可以查询所有的标准参数，

我们可以通过 -help 命令来检索出所有标准参数

![image-20230406083140244](https://notes-img2022.oss-cn-shenzhen.aliyuncs.com/img/image-20230406083140244.png)



> -help 也是一个标准参数，再比如使用比较多的 -version也是。



## 非标准参数

非标准参数以 **-X** 开头，是标准参数的扩展。对应前面讲的标准化参数，这是非标准化参数。

表示在将来的JVM版本中可能会发生改变，但是这类以-X开始的参数变化的比较小。

我们可以通过 Java -X 命令来检索所有-X 参数。

![image-20230406083337869](https://notes-img2022.oss-cn-shenzhen.aliyuncs.com/img/image-20230406083337869.png)



我们可以通过设置非标准参数来配置堆的内存分配，常用的非标准参数有：



- **-Xms** 堆内存的最小值：默认值是总内存/64（且小于1G），默认情况下，当堆中可用内存小于40%时，堆内存会开始增加，一直增加到-Xmx的大小。

- **-Xmx** 堆内存的最大值：默认值是总内存/64（且小于1G），如果Xms和Xmx都不设置，则两者大小会相同，默认情况下，当堆中可用内存大于70%时，堆内存会开始减少，一直减小到-Xms的大小；

- **-Xmn** 新生代内存的最大值：包括Eden区和两个Survivor区的总和，写法如：-Xmn1024m

- **-Xss** 每个线程的栈内存： 默认1M，一般来说是不需要改的。**(比较少用)**



## 不稳定参数

这是我们日常开发中接触到最多的参数类型。这也是非标准化参数，相对来说不稳定，随着JVM版本的变化可能会发生变化，主要用于 **JVM调优** 和 **debug**。

不稳定参数以-XX 开头，此类参数的设置很容易引起JVM 性能上的差异，使JVM存在极大的不稳定性。

如果此类参数设置合理将大大提高JVM的性能及稳定性。

不稳定参数分为三类：

- 性能参数：用于JVM的性能调优和内存分配控制，如内存大小的设置；
- 行为参数：用于改变JVM的基础行为，如GC的方式和算法的选择；
- 调试参数：用于监控、打印、输出jvm的信息；

**不稳定参数语法规则：**

1. 布尔类型参数值：
   - -XX:+
   - -XX:-

```shell
示例：-XX:+UseG1GC：表示启用G1垃圾收集器
```

2. 数字类型参数值：
   - -XX:=

```
示例：-XX:MaxGCPauseMillis=500 ：表示设置GC的最大停顿时间是500ms
```



3. 字符串类型参数值：
   - -XX:=

```
示例：-XX:HeapDumpPath=./dump.core
```





# 常用参数

| 参数名称             | 含义                                                       | 默认值               |                                                              |
| -------------------- | ---------------------------------------------------------- | -------------------- | ------------------------------------------------------------ |
| \-Xms                | 初始堆大小                                                 | 物理内存的1/64(<1GB) |                                                              |
| \-Xmx                | 最大堆大小                                                 | 物理内存的1/4(<1GB   |                                                              |
| \-Xmn                | 年轻代大小                                                 |                      |                                                              |
| \-XX:NewSize         | 设置年轻代大小                                             |                      |                                                              |
| \-XX:MaxNewSize      | 年轻代最大值                                               |                      |                                                              |
| \-XX:PermSize        | 设置持久代(perm gen)初始值                                 | 物理内存的1/64       |                                                              |
| \-XX:MaxPermSize     | 设置持久代最大值                                           | 物理内存的1/4        |                                                              |
| \-Xss                | 每个线程的堆栈大小                                         |                      |                                                              |
| \-XX:ThreadStackSize | 线程堆栈大小                                               |                      |                                                              |
| \-XX:NewRatio        | 年轻代(包括Eden和两个Survivor区)与年老代的比值(除去持久代) |                      | \-XX:NewRatio=4表示年轻代与年老代所占比值为1:4,年轻代占整个堆栈的1/5，Xms=Xmx并且设置了Xmn的情况下，该参数不需要进行设置。 |
| \-XX:SurvivorRatio   | Eden区与Survivor区的大小比值                               |                      | 设置为8,则两个Survivor区与一个Eden区的比值为2:8,一个Survivor区占整个年轻代的1/10 |



## 并行收集器相关参数

| 参数名称               | 含义                                              | 默认值 |
| ---------------------- | ------------------------------------------------- | ------ |
| \-XX:+UseParallelGC    | Full GC采用parallelMSC                            |        |
| \-XX:+UseParNewGC      | 设置年轻代为并行收集                              |        |
| \-XX:ParallelGCThreads | 并行收集器的线程数                                |        |
| \-XX:+UseParallelOldGC | 年老代垃圾收集方式为并行收集(Parallel Compacting) |        |

